node ("sf1-1"){
  stage('*** Cleanup sf1-1 ***'){
    cleanWs()
  }
  stage ('*** 3s Sleep ***'){
    sleep(time:3,unit:"SECONDS")
  }
  stage('*** Checkout SCM sf1-1 ***'){
    retry(5){
      checkout scm
    }
  }
  stage('*** make sf1-1 ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo "[INFO]: Executing for 8,000,000 iterations"
        ./coremark_no_multithread/8,000,000/coremark 0x0 0x0 0x66 8000000 7 1 2000 > ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo "[INFO]: Executing for 4,000,000 iterations"
        ./coremark_no_multithread/4,000,000/coremark 0x0 0x0 0x66 4000000 7 1 2000 > ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo "[INFO]: Executing for 2,000,000 iterations"
        ./coremark_no_multithread/2,000,000/coremark 0x0 0x0 0x66 2000000 7 1 2000 > ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo "[INFO]: Executing for 1,000,000 iterations"
        ./coremark_no_multithread/1,000,000/coremark 0x0 0x0 0x66 1000000 7 1 2000 > ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo "[INFO]: Executing for 400,000 iterations"
        ./coremark_no_multithread/400,000/coremark 0x0 0x0 0x66 400000 7 1 2000 > ./coremark_no_multithread/400,000/run1.log
      else
        echo "[INFO]: Executing for 200,000 iterations"
        ./coremark_no_multithread/200,000/coremark 0x0 0x0 0x66 200000 7 1 2000 > ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        cat ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        cat ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        cat ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        cat ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        cat ./coremark_no_multithread/400,000/run1.log
      else
        cat ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results in file ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      else
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      fi
    """
  }
  stage('*** Cleanup sf1-1 ***'){
    cleanWs()
  }
}


node ("sf1-2"){
  stage('*** Cleanup sf1-2 ***'){
    cleanWs()
  }
  stage ('*** 3s Sleep ***'){
    sleep(time:3,unit:"SECONDS")
  }
  stage('*** Checkout SCM sf1-2 ***'){
    retry(5){
      checkout scm
    }
  }
  stage('*** make sf1-2 ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo "[INFO]: Executing for 8,000,000 iterations"
        ./coremark_no_multithread/8,000,000/coremark 0x0 0x0 0x66 8000000 7 1 2000 > ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo "[INFO]: Executing for 4,000,000 iterations"
        ./coremark_no_multithread/4,000,000/coremark 0x0 0x0 0x66 4000000 7 1 2000 > ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo "[INFO]: Executing for 2,000,000 iterations"
        ./coremark_no_multithread/2,000,000/coremark 0x0 0x0 0x66 2000000 7 1 2000 > ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo "[INFO]: Executing for 1,000,000 iterations"
        ./coremark_no_multithread/1,000,000/coremark 0x0 0x0 0x66 1000000 7 1 2000 > ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo "[INFO]: Executing for 400,000 iterations"
        ./coremark_no_multithread/400,000/coremark 0x0 0x0 0x66 400000 7 1 2000 > ./coremark_no_multithread/400,000/run1.log
      else
        echo "[INFO]: Executing for 200,000 iterations"
        ./coremark_no_multithread/200,000/coremark 0x0 0x0 0x66 200000 7 1 2000 > ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        cat ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        cat ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        cat ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        cat ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        cat ./coremark_no_multithread/400,000/run1.log
      else
        cat ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results in file ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      else
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      fi
    """
  }
  stage('*** Cleanup sf1-2 ***'){
    cleanWs()
  }
}

node ("sf1-3"){
  stage('*** Cleanup sf1-3 ***'){
    cleanWs()
  }
  stage ('*** 3s Sleep ***'){
    sleep(time:3,unit:"SECONDS")
  }
  stage('*** Checkout SCM sf1-3 ***'){
    retry(5){
      checkout scm
    }
  }
  stage('*** make sf1-3 ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo "[INFO]: Executing for 8,000,000 iterations"
        ./coremark_no_multithread/8,000,000/coremark 0x0 0x0 0x66 8000000 7 1 2000 > ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo "[INFO]: Executing for 4,000,000 iterations"
        ./coremark_no_multithread/4,000,000/coremark 0x0 0x0 0x66 4000000 7 1 2000 > ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo "[INFO]: Executing for 2,000,000 iterations"
        ./coremark_no_multithread/2,000,000/coremark 0x0 0x0 0x66 2000000 7 1 2000 > ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo "[INFO]: Executing for 1,000,000 iterations"
        ./coremark_no_multithread/1,000,000/coremark 0x0 0x0 0x66 1000000 7 1 2000 > ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo "[INFO]: Executing for 400,000 iterations"
        ./coremark_no_multithread/400,000/coremark 0x0 0x0 0x66 400000 7 1 2000 > ./coremark_no_multithread/400,000/run1.log
      else
        echo "[INFO]: Executing for 200,000 iterations"
        ./coremark_no_multithread/200,000/coremark 0x0 0x0 0x66 200000 7 1 2000 > ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        cat ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        cat ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        cat ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        cat ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        cat ./coremark_no_multithread/400,000/run1.log
      else
        cat ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results in file ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      else
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      fi
    """
  }
  stage('*** Cleanup sf1-3 ***'){
    cleanWs()
  }
}

node ("sf2-1"){
  stage('*** Cleanup sf2-1 ***'){
    cleanWs()
  }
  stage ('*** 3s Sleep ***'){
    sleep(time:3,unit:"SECONDS")
  }
  stage('*** Checkout SCM sf2-1 ***'){
    retry(5){
      checkout scm
    }
  }
  stage('*** make sf2-1 ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo "[INFO]: Executing for 8,000,000 iterations"
        ./coremark_no_multithread/8,000,000/coremark 0x0 0x0 0x66 8000000 7 1 2000 > ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo "[INFO]: Executing for 4,000,000 iterations"
        ./coremark_no_multithread/4,000,000/coremark 0x0 0x0 0x66 4000000 7 1 2000 > ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo "[INFO]: Executing for 2,000,000 iterations"
        ./coremark_no_multithread/2,000,000/coremark 0x0 0x0 0x66 2000000 7 1 2000 > ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo "[INFO]: Executing for 1,000,000 iterations"
        ./coremark_no_multithread/1,000,000/coremark 0x0 0x0 0x66 1000000 7 1 2000 > ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo "[INFO]: Executing for 400,000 iterations"
        ./coremark_no_multithread/400,000/coremark 0x0 0x0 0x66 400000 7 1 2000 > ./coremark_no_multithread/400,000/run1.log
      else
        echo "[INFO]: Executing for 200,000 iterations"
        ./coremark_no_multithread/200,000/coremark 0x0 0x0 0x66 200000 7 1 2000 > ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        cat ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        cat ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        cat ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        cat ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        cat ./coremark_no_multithread/400,000/run1.log
      else
        cat ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results in file ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      else
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      fi
    """
  }
  stage('*** Cleanup sf2-1 ***'){
    cleanWs()
  }
}

node ("sf2-2"){
  stage('*** Cleanup sf2-2 ***'){
    cleanWs()
  }
  stage ('*** 3s Sleep ***'){
    sleep(time:3,unit:"SECONDS")
  }
  stage('*** Checkout SCM sf2-2 ***'){
    retry(5){
      checkout scm
    }
  }
  stage('*** make sf2-2 ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo "[INFO]: Executing for 8,000,000 iterations"
        ./coremark_no_multithread/8,000,000/coremark 0x0 0x0 0x66 8000000 7 1 2000 > ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo "[INFO]: Executing for 4,000,000 iterations"
        ./coremark_no_multithread/4,000,000/coremark 0x0 0x0 0x66 4000000 7 1 2000 > ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo "[INFO]: Executing for 2,000,000 iterations"
        ./coremark_no_multithread/2,000,000/coremark 0x0 0x0 0x66 2000000 7 1 2000 > ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo "[INFO]: Executing for 1,000,000 iterations"
        ./coremark_no_multithread/1,000,000/coremark 0x0 0x0 0x66 1000000 7 1 2000 > ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo "[INFO]: Executing for 400,000 iterations"
        ./coremark_no_multithread/400,000/coremark 0x0 0x0 0x66 400000 7 1 2000 > ./coremark_no_multithread/400,000/run1.log
      else
        echo "[INFO]: Executing for 200,000 iterations"
        ./coremark_no_multithread/200,000/coremark 0x0 0x0 0x66 200000 7 1 2000 > ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        cat ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        cat ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        cat ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        cat ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        cat ./coremark_no_multithread/400,000/run1.log
      else
        cat ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results in file ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      else
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      fi
    """
  }
  stage('*** Cleanup sf2-2 ***'){
    cleanWs()
  }
}

node ("sf2-3"){
  stage('*** Cleanup sf2-3 ***'){
    cleanWs()
  }
  stage ('*** 3s Sleep ***'){
    sleep(time:3,unit:"SECONDS")
  }
  stage('*** Checkout SCM sf2-3 ***'){
    retry(5){
      checkout scm
    }
  }
  stage('*** make sf2-3 ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo "[INFO]: Executing for 8,000,000 iterations"
        ./coremark_no_multithread/8,000,000/coremark 0x0 0x0 0x66 8000000 7 1 2000 > ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo "[INFO]: Executing for 4,000,000 iterations"
        ./coremark_no_multithread/4,000,000/coremark 0x0 0x0 0x66 4000000 7 1 2000 > ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo "[INFO]: Executing for 2,000,000 iterations"
        ./coremark_no_multithread/2,000,000/coremark 0x0 0x0 0x66 2000000 7 1 2000 > ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo "[INFO]: Executing for 1,000,000 iterations"
        ./coremark_no_multithread/1,000,000/coremark 0x0 0x0 0x66 1000000 7 1 2000 > ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo "[INFO]: Executing for 400,000 iterations"
        ./coremark_no_multithread/400,000/coremark 0x0 0x0 0x66 400000 7 1 2000 > ./coremark_no_multithread/400,000/run1.log
      else
        echo "[INFO]: Executing for 200,000 iterations"
        ./coremark_no_multithread/200,000/coremark 0x0 0x0 0x66 200000 7 1 2000 > ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        cat ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        cat ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        cat ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        cat ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        cat ./coremark_no_multithread/400,000/run1.log
      else
        cat ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results in file ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      else
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      fi
    """
  }
  stage('*** Cleanup sf2-3 ***'){
    cleanWs()
  }
}

node ("sf2-4"){
  stage('*** Cleanup sf2-4 ***'){
    cleanWs()
  }
  stage ('*** 3s Sleep ***'){
    sleep(time:3,unit:"SECONDS")
  }
  stage('*** Checkout SCM sf2-4 ***'){
    retry(5){
      checkout scm
    }
  }
  stage('*** make sf2-4 ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo "[INFO]: Executing for 8,000,000 iterations"
        ./coremark_no_multithread/8,000,000/coremark 0x0 0x0 0x66 8000000 7 1 2000 > ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo "[INFO]: Executing for 4,000,000 iterations"
        ./coremark_no_multithread/4,000,000/coremark 0x0 0x0 0x66 4000000 7 1 2000 > ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo "[INFO]: Executing for 2,000,000 iterations"
        ./coremark_no_multithread/2,000,000/coremark 0x0 0x0 0x66 2000000 7 1 2000 > ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo "[INFO]: Executing for 1,000,000 iterations"
        ./coremark_no_multithread/1,000,000/coremark 0x0 0x0 0x66 1000000 7 1 2000 > ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo "[INFO]: Executing for 400,000 iterations"
        ./coremark_no_multithread/400,000/coremark 0x0 0x0 0x66 400000 7 1 2000 > ./coremark_no_multithread/400,000/run1.log
      else
        echo "[INFO]: Executing for 200,000 iterations"
        ./coremark_no_multithread/200,000/coremark 0x0 0x0 0x66 200000 7 1 2000 > ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        cat ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        cat ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        cat ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        cat ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        cat ./coremark_no_multithread/400,000/run1.log
      else
        cat ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results in file ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      else
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      fi
    """
  }
  stage('*** Cleanup sf2-4 ***'){
    cleanWs()
  }
}


node ("sf2-5"){
  stage('*** Cleanup sf2-5 ***'){
    cleanWs()
  }
  stage ('*** 3s Sleep ***'){
    sleep(time:3,unit:"SECONDS")
  }
  stage('*** Checkout SCM sf2-5 ***'){
    retry(5){
      checkout scm
    }
  }
  stage('*** make sf2-5 ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo "[INFO]: Executing for 8,000,000 iterations"
        ./coremark_no_multithread/8,000,000/coremark 0x0 0x0 0x66 8000000 7 1 2000 > ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo "[INFO]: Executing for 4,000,000 iterations"
        ./coremark_no_multithread/4,000,000/coremark 0x0 0x0 0x66 4000000 7 1 2000 > ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo "[INFO]: Executing for 2,000,000 iterations"
        ./coremark_no_multithread/2,000,000/coremark 0x0 0x0 0x66 2000000 7 1 2000 > ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo "[INFO]: Executing for 1,000,000 iterations"
        ./coremark_no_multithread/1,000,000/coremark 0x0 0x0 0x66 1000000 7 1 2000 > ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo "[INFO]: Executing for 400,000 iterations"
        ./coremark_no_multithread/400,000/coremark 0x0 0x0 0x66 400000 7 1 2000 > ./coremark_no_multithread/400,000/run1.log
      else
        echo "[INFO]: Executing for 200,000 iterations"
        ./coremark_no_multithread/200,000/coremark 0x0 0x0 0x66 200000 7 1 2000 > ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        cat ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        cat ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        cat ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        cat ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        cat ./coremark_no_multithread/400,000/run1.log
      else
        cat ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results in file ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      else
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      fi
    """
  }
  stage('*** Cleanup sf2-5 ***'){
    cleanWs()
  }
}


node ("unleashed1-1"){
  stage('*** Cleanup unleashed1-1 ***'){
    cleanWs()
  }
  stage ('*** 3s Sleep ***'){
    sleep(time:3,unit:"SECONDS")
  }
  stage('*** Checkout SCM unleashed1-1 ***'){
    retry(5){
      checkout scm
    }
  }
    stage('*** make unleashed1-1 ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo "[INFO]: Executing for 8,000,000 iterations"
        ./coremark_no_multithread/8,000,000/coremark 0x0 0x0 0x66 8000000 7 1 2000 > ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo "[INFO]: Executing for 4,000,000 iterations"
        ./coremark_no_multithread/4,000,000/coremark 0x0 0x0 0x66 4000000 7 1 2000 > ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo "[INFO]: Executing for 2,000,000 iterations"
        ./coremark_no_multithread/2,000,000/coremark 0x0 0x0 0x66 2000000 7 1 2000 > ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo "[INFO]: Executing for 1,000,000 iterations"
        ./coremark_no_multithread/1,000,000/coremark 0x0 0x0 0x66 1000000 7 1 2000 > ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo "[INFO]: Executing for 400,000 iterations"
        ./coremark_no_multithread/400,000/coremark 0x0 0x0 0x66 400000 7 1 2000 > ./coremark_no_multithread/400,000/run1.log
      else
        echo "[INFO]: Executing for 200,000 iterations"
        ./coremark_no_multithread/200,000/coremark 0x0 0x0 0x66 200000 7 1 2000 > ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        cat ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        cat ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        cat ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        cat ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        cat ./coremark_no_multithread/400,000/run1.log
      else
        cat ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results in file ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      else
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      fi
    """
  }
  stage('*** Cleanup unleashed1-1 ***'){
    cleanWs()
  }
}

node ("unleashed1-2"){
  stage('*** Cleanup unleashed1-2 ***'){
    cleanWs()
  }
  stage ('*** 3s Sleep ***'){
    sleep(time:3,unit:"SECONDS")
  }
  stage('*** Checkout SCM unleashed1-2 ***'){
    retry(5){
      checkout scm
    }
  }
  stage('*** make unleashed1-2 ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo "[INFO]: Executing for 8,000,000 iterations"
        ./coremark_no_multithread/8,000,000/coremark 0x0 0x0 0x66 8000000 7 1 2000 > ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo "[INFO]: Executing for 4,000,000 iterations"
        ./coremark_no_multithread/4,000,000/coremark 0x0 0x0 0x66 4000000 7 1 2000 > ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo "[INFO]: Executing for 2,000,000 iterations"
        ./coremark_no_multithread/2,000,000/coremark 0x0 0x0 0x66 2000000 7 1 2000 > ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo "[INFO]: Executing for 1,000,000 iterations"
        ./coremark_no_multithread/1,000,000/coremark 0x0 0x0 0x66 1000000 7 1 2000 > ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo "[INFO]: Executing for 400,000 iterations"
        ./coremark_no_multithread/400,000/coremark 0x0 0x0 0x66 400000 7 1 2000 > ./coremark_no_multithread/400,000/run1.log
      else
        echo "[INFO]: Executing for 200,000 iterations"
        ./coremark_no_multithread/200,000/coremark 0x0 0x0 0x66 200000 7 1 2000 > ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        cat ./coremark_no_multithread/8,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        cat ./coremark_no_multithread/4,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        cat ./coremark_no_multithread/2,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        cat ./coremark_no_multithread/1,000,000/run1.log
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        cat ./coremark_no_multithread/400,000/run1.log
      else
        cat ./coremark_no_multithread/200,000/run1.log
      fi
    """
  }
  stage('*** Printing Results in file ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 25 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/8,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/8,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/4,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/4,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 15 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/2,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/2,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 10 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/1,000,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/1,000,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/400,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/400,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      else
        echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f2 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f3 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$4}' ./coremark_no_multithread/200,000/run1.log | cut -f4 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f5 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk '{print \$3}' ./coremark_no_multithread/200,000/run1.log | cut -f6 -d\$'\n') >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
      fi
    """
  }
  stage('*** Cleanup unleashed1-2 ***'){
    cleanWs()
  }
}

node ("dell5559"){
  stage('*** Cleanup dell5559 ***'){
    cleanWs()
  }
  stage ('*** 3s Sleep ***'){
    sleep(time:3,unit:"SECONDS")
  }
  stage('*** Checkout SCM dell5559 ***'){
    retry(5){
      checkout scm
    }
  }
  stage('*** make dell5559 ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 35 ]; then
        make ITERATIONS=8000000 CC=gcc PORT_DIR=linux/ RUN=
      elif [ \$BUILD_NUMBER -gt 30 ]; then
        make ITERATIONS=4000000 CC=gcc PORT_DIR=linux/ RUN=
      elif [ \$BUILD_NUMBER -gt 25 ]; then
        make ITERATIONS=2000000 CC=gcc PORT_DIR=linux/ RUN=
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        make ITERATIONS=1000000 CC=gcc PORT_DIR=linux/ RUN=
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        make ITERATIONS=400000 CC=gcc PORT_DIR=linux/ RUN=
      else
        make ITERATIONS=200000 CC=gcc PORT_DIR=linux/ RUN=
      fi
    """
  }
  stage ('*** Print Results dell5559 ***'){
    sh"""#!/bin/bash

      echo -e "[jenkinsfile INFO]: Printing run1.log for dell5559 single core"
      echo "<====================================================================>"
      cat run1.log
      echo "<====================================================================>"
      echo -e "[jenkinsfile INFO]: Printing run2.log for dell5559 single core"
      echo "<====================================================================>"
      cat run2.log
      echo "<====================================================================>"
    """
  }
  stage ('*** Printing results to csv file dell5559 ***'){
    sh"""#!/bin/bash
      # Printing to run1_\$HOSTNAME.csv
      echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk 'FNR == 2 {print \$4}' ./run1.log) >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk 'FNR == 3 {print \$4}' ./run1.log) >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk 'FNR == 4 {print \$4}' ./run1.log) >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk 'FNR == 5 {print \$3}' ./run1.log) >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk 'FNR == 6 {print \$3}' ./run1.log) >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
    """
  }
  stage('*** Cleanup dell5559 ***'){
    cleanWs()
  }
}

node ("rasp4-1"){
  stage('*** Cleanup rasp4-1 ***'){
    cleanWs()
  }
  stage ('*** 3s Sleep ***'){
    sleep(time:3,unit:"SECONDS")
  }
  stage('*** Checkout SCM rasp4-1 ***'){
    retry(5){
      checkout scm
    }
  }
  stage('*** make rasp4-1 ***'){
    sh"""#!/bin/bash
      if [ \$BUILD_NUMBER -gt 35 ]; then
        make ITERATIONS=8000000 CC=gcc PORT_DIR=linux/ RUN=
      elif [ \$BUILD_NUMBER -gt 30 ]; then
        make ITERATIONS=4000000 CC=gcc PORT_DIR=linux/ RUN=
      elif [ \$BUILD_NUMBER -gt 25 ]; then
        make ITERATIONS=2000000 CC=gcc PORT_DIR=linux/ RUN=
      elif [ \$BUILD_NUMBER -gt 20 ]; then
        make ITERATIONS=1000000 CC=gcc PORT_DIR=linux/ RUN=
      elif [ \$BUILD_NUMBER -gt 5 ]; then
        make ITERATIONS=400000 CC=gcc PORT_DIR=linux/ RUN=
      else
        make ITERATIONS=200000 CC=gcc PORT_DIR=linux/ RUN=
      fi
    """
  }
  stage ('*** Print Results rasp4-1 ***'){
    sh"""#!/bin/bash

      echo -e "[jenkinsfile INFO]: Printing run1.log for dell5559 single core"
      echo "<====================================================================>"
      cat run1.log
      echo "<====================================================================>"
      echo -e "[jenkinsfile INFO]: Printing run2.log for dell5559 single core"
      echo "<====================================================================>"
      cat run2.log
      echo "<====================================================================>"
    """
  }
  stage ('*** Printing results to csv file rasp4-1 ***'){
    sh"""#!/bin/bash
      # Printing to run1_\$HOSTNAME.csv
      echo -n \$BUILD_NUMBER >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk 'FNR == 2 {print \$4}' ./run1.log) >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk 'FNR == 3 {print \$4}' ./run1.log) >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk 'FNR == 4 {print \$4}' ./run1.log) >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk 'FNR == 5 {print \$3}' ./run1.log) >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n "," >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; echo -n \$(awk 'FNR == 6 {print \$3}' ./run1.log) >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv; printf '%s\n' >> ~/coremark_results/run1.log/run1_\$HOSTNAME.csv
    """
  }
  stage('*** Cleanup rasp4-1 ***'){
    cleanWs()
  }
}
